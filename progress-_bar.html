<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Progress Bar with requestAnimationFrame</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 40px;
  }
  .progress-container {
    width: 400px;
    height: 30px;
    background: #ddd;
    border-radius: 15px;
    overflow: hidden;
    position: relative;
  }
  .progress-bar {
    height: 100%;
    width: 0;
    background: #4caf50;
    border-radius: 15px 0 0 15px;
    transition: width 0.1s ease-out;
  }
  .progress-text {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    text-align: center;
    line-height: 30px;
    font-weight: bold;
    color: #333;
    user-select: none;
  }
</style>
</head>
<body>

<h2>Progress Bar up to 70%</h2>
<div class="progress-container">
  <div class="progress-bar"></div>
  <div class="progress-text">0%</div>
</div>

<script>
    function progress(maxP, dur){
        let maxParcent = maxP;
        let currentPercent;
        let duration = dur;
        let startTime;
        let elapsed;
        let bar = document.querySelector(".progress-bar");
        let text = document.querySelector(".progress-text");

        function animateProgress(timestam){
            if(!startTime) startTime = timestam;

            elapsed = timestam - startTime;
            currentPercent = Math.min(maxParcent, (elapsed / duration) * maxParcent);
            bar.style.width = currentPercent + "%";
            text.innerText = Math.floor(currentPercent);

            if( currentPercent < maxParcent){
                requestAnimationFrame(animateProgress);
            }
        }

        requestAnimationFrame(animateProgress);
    }

    progress(80, 3000)
</script>
</body>
</html>