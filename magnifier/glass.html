<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* {box-sizing: border-box;}

.img-magnifier-container {
  position:relative;
}

.img-magnifier-glass {
  position: absolute;
  border: 3px solid #000;
  border-radius: 50%;
  cursor: none;
  /*Set the size of the magnifier glass:*/
  width: 100px;
  height: 100px;
  z-index: 1;
}
</style>

</head>
<body>

<h1>Image Magnifier Glass</h1>

<p>Mouse over the image:</p>

<div class="img-magnifier-container">
  <img id="myimage" src="img_girl.jpg" width="600" height="400">
</div>

<p>Feel free to change the strength of the magnifier glass when initiating the magnify function.</p>

<script>
function magnify(imgId, zoom){
let img, glass, w, h;

img = document.getElementById(imgId);
glass = document.createElement("div");
glass.setAttribute("class", "img-magnifier-glass");
img.parentElement.insertBefore(glass, img);
glass.style.backgroundImage = `url(${img.src})`;
glass.style.backgroundSize = (img.offsetWidth * zoom) + "px";

w = glass.offsetWidth/2;
h = glass.offsetHeight/2

img.addEventListener("mousemove", moveGlass);
glass.addEventListener("mousemove", moveGlass);

function moveGlass(e){
     let x, y, pos = getCursor(e);
console.log("biniam");
     x = pos.x ;
     y = pos.y;

     x = Math.max(0, Math.min(x, img.offsetWidth - w));
     y = Math.max(0, Math.min(y, img.offsetHeight - h));

     glass.style.left = (x + w) + "px";
     glass.style.top = (y+h) + "px";

     glass.style.backgroundPosition = `-${x * zoom - w}px -${y * zoom -h}px`;
}

function getCursor(e){
    let x, y, c = img.getBoundingClientRect();
    x = e.clientX - c.left;
    y = e.clientY - c.top;

    return {x : x, y : y}
}

}

magnify("myimage", 3);
</script>

</body>
</html>
